@model PagedList.Core.IPagedList<Hld.WebApplication.ViewModel.ZincWatchlistLogsViewModel>
@using Hld.WebApplication.Helper
@*@model IEnumerable<Hld.WebApplication.ViewModel.BestBuyOrdersViewModel>*@
@inject Microsoft.AspNetCore.Hosting.IHostingEnvironment hostingEnv

<style>
    tr.detail {
        display: none;
        width: 100%;
    }

    .hidden_row {
        display: none;
    }

    .showmore:hover {
        cursor: pointer;
    }

    .preappendlist {
        height: 26px;
        padding: 0px;
    }

    .cmclass {
        /*width: 60px;*/
        box-shadow: none;
    }

    .form-control {
        box-shadow: none !important;
    }

    .input-group {
        position: relative;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -ms-flex-align: stretch;
        align-items: stretch;
        width: 99% !important;
    }

    .btndivstyle {
        width: 260px !important;
        min-width: 260px !important;
        padding: 6px !important;
        margin-right: 2px !important;
        border-radius: 3px !important;
    }

    .btnsave {
        outline: none !important;
        box-shadow: none !important;
    }

    .btncancel {
        outline: none !important;
        box-shadow: none !important;
    }

    .table {
        border-left: #ccc 1px solid !important;
        border-right: #ccc 1px solid !important;
        border-bottom: #ccc 1px solid !important;
        cursor: pointer !important;
    }

        .table thead tr th {
            position: sticky;
            top: 50px;
            padding: 5px;
            z-index: 2;
            background-color: lightgray !important;
        }
</style>

<table class="table">
    <thead class="thead-light">
        <tr>
            <th data-sorter="false">
                <input type="checkbox" id="headerCheckBox" />
            </th>
            <th>
                Job ID #
            </th>
            <th>
                Image
            </th>

            <th>
                ASIN
            </th>
            <th>
                Product SKU
            </th>
            <th>
                Zinc Response
            </th>
            <th>
                Seller Name
            </th>
            <th>
                Amazon Price
            </th>
            <th>
                Prime
            </th>
            <th>
                Fulfilled BY
            </th>
            <th>Product ID</th>
            <th> Existing Selling Price</th>
            <th>Updated Selling Price</th>
            <th>MSRP Price</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr>
            <td>
                <input type='text' style="display:none" class='form-control CheckApproved watchlistdata' value='@item.IsPrime'>
                <input class="checkboxSkuForUpdating checkboxSkForEnableDisable " disabled="@(item.IsPrime==1?false:true)" type="checkbox" />
                <input type="hidden" asp-for="@item.ProductSKU" id="productSkuForUpdating" class="productSkuForEnableDisable" />
                <input type="hidden" asp-for="@item.BBProductId" id="productIdForUpdating" class="productSkuForEnableDisable" />
                @*<input type="hidden" asp-for="@item.ProductSKU" id="productSkuForUpdating" class="productSkuForEnableDisable" />*@
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.jobID)
            </td>
            <td>
                @{
                    <a target="_blank" href="@ViewBag.image_name_URL/@item.image_name">
                        <img src="@ViewBag.Compress_image_URL/@item.Compress_image" class="rounded" height="50" width="50" />
                    </a>
                }
            </td>
            <td>
                <a href="https://www.amazon.ca/dp/@item.ASIN" target="_blank">@item.ASIN</a>
            </td>
            <td>
                <span><a style="cursor:pointer" asp-action="ProductZinc" asp-controller="Zinc" asp-route-productsku="@item.ProductSKU" target="_blank">@item.ProductSKU</a></span><br />
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ZincResponse)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SellerName)
            </td>
            <td>
                @{
                    int item_price = Convert.ToInt32(item.Amz_Price);
                    decimal itemprice = 0.0m;
                    if (item_price > 0)
                    {
                        itemprice = (decimal)(item_price / 100.0);
                    }

                }
                $@itemprice

            </td>
            <td>
                @if (item.IsPrime == 1)
                {
                    <span>Available</span>
                }
                else
                {
                    <span>Unavailable</span>
                }
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FulfilledBY)
            </td>
            <td>
                @item.BBProductId
            </td>
            <td>
                @item.BBSellingPrice
            </td>
            <td>
                <input style="display:none" value="@item.UnitOriginPrice_Max" class="UpdatingSellingPrice" />
                <input style="display:none" value="@item.UnitOriginPrice_MSRP" class="MSRP" />
                @{
                    var maxprice = Math.Round(item.UnitOriginPrice_Max / 100, 2);
                }
                <div class="btndivstyle form-group row">
                    <div class="row" style="width:150px!important">
                        <div class="col-md-12">
                            <div class='input-group cmclass' style=''>
                                <div class='input-group-append preappendlist'> <span class='input-group-text appendafter' style='color: #0099cc !important; font-size:12px;'>$</span></div>
                                <input type="number" value="@maxprice" class="form-control inputvalchange" data-id="@item.ASIN" />

                            </div>
                        </div>
                    </div>
                    <div class="row" style="margin-left:-5px!important">
                        <div class="col-md-12">
                            <span class="btnbuttonstyle">
                                <button class="btn btn-sm btn-warning btnsavetable" id="" style="">Save</button>
                                <button class="btn btn-sm btn-secondary btncanceltable" id="btncanceltable">Cancel</button>
                            </span>
                        </div>
                    </div>
                </div>
            </td>
            <td>
                @{ var msrpprice = (Math.Round(item.UnitOriginPrice_MSRP, 2));



                                    var y = msrpprice.ToString().Split(".");

                                    var MSRP = msrpprice.ToString();
                                    if (y.Length > 1)
                                    {


                                    }
                                    else
                                    {
                                        MSRP = msrpprice + ".00";
                                    }
                }
                @MSRP
            </td>
        </tr>
            <tr style="width: 98%;" class="detail hidden_row" id=@(item.ASIN+item.jobID)>
            </tr>
        }
    </tbody>
</table>
